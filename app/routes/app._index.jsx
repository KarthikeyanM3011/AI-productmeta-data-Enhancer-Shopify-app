import { useState } from "react";
import { Page, Layout, Card, Button, Text, BlockStack, Box, Link, InlineStack, List} from "@shopify/polaris";
import { TitleBar } from "@shopify/app-bridge-react";

export default function Index() {
  const [namespace, setNamespace] = useState("cartesian");

  const toggleNamespace = () => {
    setNamespace(namespace === "cartesian" ? "global" : "cartesian");
  };

  const metafieldCode = namespace === "cartesian" ? `
    <div class="metafields-container">  
      {% assign product_namespace = "cartesian" %}
      {% for metafield in product.metafields[product_namespace] %}
        {% if metafield[1].value != blank %}
          <p><strong>{{ metafield[0] | replace: '_', ' ' | capitalize }}:</strong> {{ metafield[1].value }}</p>
        {% endif %}
      {% endfor %}
    </div>` : `
    <div class="metafields-container">
    {% assign possible_namespaces = "Your namespaces separated by ', ' " | split: ", " %}
    {% for namespace in possible_namespaces %}
      {% assign metafields = product.metafields[namespace] %}
      {% if metafields %}
        {% for metafield in metafields %}
          {% if metafield[1].value != blank %}
            <p>
              <strong>{{ metafield[0] | replace: '_', ' ' | capitalize }}:</strong> {{ metafield[1].value }}
            </p>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}
  </div>`;

  return (
    <Page>
      <TitleBar title="Majik - Enhance Metadata with AI and Plotch.ai" />
      <BlockStack gap="500">
        <Layout>
          <Layout.Section>
            <Card title="Enhance Your Metadata with Majik" sectioned>
              <Text as="h1" variant="headingLg">
                Revolutionize Your Shopify Metadata Management
              </Text>
              <Text as="p" variant="bodyMd">
                Majik uses AI-powered metadata generation from Plotch.ai to provide you with the best, most accurate product metadata in the market. Improve product visibility and organization in your Shopify store with high-quality metadata generation.
              </Text>
            <Link to="/app/productdetails" style={{ textDecoration: 'none' }}>
              <Button primary style={{ backgroundColor: 'white', color: 'black', borderColor: 'black' }}>
                Get Started
              </Button>
            </Link>
            </Card>
            <br></br>
            
            <Card title="Features" sectioned>
              <BlockStack gap="300">
                <Text variant="headingMd">Generate Metadata</Text>
                <Text as="p" variant="bodyMd">
                  Select products from your store, and Majik will generate metadata for you at just ₹1 per product. Our AI ensures the most accurate and relevant metadata. Once you place the order, the request is processed immediately.
                </Text>

                <Text variant="headingMd">Review Metadata</Text>
                <Text as="p" variant="bodyMd">
                  View and manage your metadata generation requests in real-time. Apply the metadata to your products at any time from the Review page. Process, review, and apply effortlessly.
                </Text>

                <Text variant="headingMd">Manage Product Metadata</Text>
                <Text as="p" variant="bodyMd">
                  Get an overview of all your product metadata. Use the MetaProducts page to create new metafields, update existing ones, or delete unwanted ones. The 'cartesian' namespace ensures that metadata created here is consistent and easy to manage.
                </Text>
              </BlockStack>
            </Card>
            <br></br>
            
            <Card title="Display Metadata in Your Storefront" sectioned>
              <Text as="p" variant="bodyMd">
                Use the following code to display the metafields generated by Majik on your storefront:
              </Text>

              <Button onClick={toggleNamespace}>
                Show {namespace === "cartesian" ? "Global" : "Cartesian"} Namespace
              </Button>
              <div style={{ marginBottom: '16px' }} />
              
              <Box padding="400" background="bg-surface-active" borderWidth="025" borderRadius="200" borderColor="border" overflowX="scroll">
                <pre style={{ margin: 0 }}>
                  <code>{metafieldCode}</code>
                </pre>
              </Box>

              <Text as="p" variant="bodyMd">
                Simply paste this code into your Shopify theme to display product metafields generated using Majik.
              </Text>
            </Card>
          </Layout.Section>
          <br></br>
          
          <Layout.Section secondary>
            <Card title="Why Choose Majik?" sectioned>
            <Box>
              <Text variant="headingMd">AI-Powered Accuracy</Text>
              <Text variant="bodyMd">
                Majik, powered by Plotch.ai, ensures the highest-quality metadata using cutting-edge AI technology. Your store deserves nothing less.
              </Text>
            </Box>
            <Box>
              <Text variant="headingMd">Real-Time Updates</Text>
              <Text variant="bodyMd">
                Every change you make to your metadata is reflected in real-time, giving you full control over your Shopify store.
              </Text>
            </Box>
            <Box>
              <Text variant="headingMd">Affordable</Text>
              <Text variant="bodyMd">
                Generate accurate product metadata for just ₹10 per product, saving you both time and money.
              </Text>
            </Box>
          </Card>
          <br></br>
            
            <Card title="Next Steps" sectioned>
              <List type="bullet">
                <List.Item>
                  Visit the{" "}
                  <Link
                    to={`/app/productdetails`}
                    style={{
                      color: "black",
                      textDecoration: "none",
                      borderBottom: "1px solid black",
                    }}
                    onMouseEnter={(e) => (e.target.style.borderBottom = "2px solid black")}
                    onMouseLeave={(e) => (e.target.style.borderBottom = "1px solid black")}
                  >
                    View
                  </Link>{" "}
                  to start creating high-quality metadata.
                </List.Item>
                <List.Item>
                  Track your metadata requests in real-time on the{" "}
                  <Link
                    to={`/app/review`}
                    style={{
                      color: "black",
                      textDecoration: "none",
                      borderBottom: "1px solid black",
                    }}
                    onMouseEnter={(e) => (e.target.style.borderBottom = "2px solid black")}
                    onMouseLeave={(e) => (e.target.style.borderBottom = "1px solid black")}
                  >
                    View
                  </Link>
                  .
                </List.Item>
                <List.Item>
                  Manage and edit existing metadata from the{" "}
                  <Link
                    to={`/app/metafields`}
                    style={{
                      color: "black",
                      textDecoration: "none",
                      borderBottom: "1px solid black",
                    }}
                    onMouseEnter={(e) => (e.target.style.borderBottom = "2px solid black")}
                    onMouseLeave={(e) => (e.target.style.borderBottom = "1px solid black")}
                  >
                    View
                  </Link>
                  .
                </List.Item>
              </List>
            </Card>
          </Layout.Section>
        </Layout>
      </BlockStack>
    </Page>
  );
}
